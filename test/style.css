/* ===== 변수 ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:         #0d1117;
  --bg2:        #161b22;
  --bg3:        #1c2128;
  --bg4:        #21262d;
  --border:     #30363d;
  --border2:    #444c56;
  --accent:     #00d4aa;
  --accent-dim: rgba(0,212,170,.12);
  --blue:       #58a6ff;
  --red:        #f85149;
  --orange:     #d29922;
  --yellow:     #e3b341;
  --green:      #3fb950;
  --purple:     #bc8cff;
  --text1:      #e6edf3;
  --text2:      #8b949e;
  --text3:      #484f58;
  --r:          8px;
  --shadow:     0 4px 20px rgba(0,0,0,.5);
}

html { scroll-behavior: smooth; }
body {
  font-family: 'Segoe UI', 'Noto Sans KR', sans-serif;
  background: var(--bg);
  color: var(--text1);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* ===== 헤더 ===== */
header {
  position: sticky; top: 0; z-index: 100;
  background: rgba(13,17,23,.96);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
}
.header-inner {
  max-width: 1440px; margin: 0 auto;
  padding: 0 20px; height: 56px;
  display: flex; align-items: center; gap: 20px;
}

.logo { display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
.logo-icon {
  font-family: monospace; font-size: 15px; font-weight: 700;
  color: var(--accent); background: var(--accent-dim);
  border: 1px solid var(--accent); padding: 2px 5px; border-radius: 4px;
}
.logo-text { font-size: 16px; font-weight: 700; }
.logo-sub { font-size: 11px; color: var(--text3); padding-left: 4px; border-left: 1px solid var(--border); margin-left: 4px; }

.main-nav { display: flex; gap: 2px; flex: 1; overflow-x: auto; }
.nav-tab {
  display: flex; align-items: center; gap: 6px;
  background: none; border: none; color: var(--text2);
  padding: 6px 14px; border-radius: 20px; font-size: 13px;
  font-weight: 500; cursor: pointer; white-space: nowrap;
  transition: all .2s;
}
.nav-tab:hover { color: var(--text1); background: var(--bg4); }
.nav-tab.active { color: var(--accent); background: var(--accent-dim); border: 1px solid var(--accent); }
.tab-icon { font-size: 14px; }

.header-right { flex-shrink: 0; }
.add-btn {
  background: var(--accent); color: #000;
  border: none; padding: 7px 18px; border-radius: 20px;
  font-size: 13px; font-weight: 700; cursor: pointer;
  transition: opacity .2s;
}
.add-btn:hover { opacity: .85; }

/* ===== 레이아웃 ===== */
.layout {
  max-width: 1440px; margin: 0 auto; width: 100%;
  display: flex; flex: 1; gap: 0;
}

/* ===== 사이드바 ===== */
.sidebar {
  width: 210px; flex-shrink: 0;
  border-right: 1px solid var(--border);
  padding: 20px 16px;
  display: flex; flex-direction: column; gap: 24px;
  position: sticky; top: 56px;
  height: calc(100vh - 56px);
  overflow-y: auto;
}
.sidebar-title { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; color: var(--text3); margin-bottom: 10px; }
.sidebar-stats { display: flex; flex-direction: column; gap: 6px; }
.s-stat { font-size: 13px; color: var(--text2); display: flex; gap: 6px; align-items: center; }
.s-stat span { font-size: 18px; font-weight: 700; color: var(--accent); font-family: monospace; min-width: 28px; }
.tag-cloud { display: flex; flex-wrap: wrap; gap: 6px; }
.tag-chip {
  font-size: 11px; padding: 2px 8px; border-radius: 12px;
  background: var(--bg4); border: 1px solid var(--border); color: var(--text2);
  cursor: pointer; transition: all .15s;
}
.tag-chip:hover { border-color: var(--accent); color: var(--accent); }
.sidebar-cats { display: flex; flex-direction: column; gap: 4px; }
.cat-item {
  font-size: 12px; color: var(--text2); padding: 4px 8px; border-radius: 6px;
  cursor: pointer; transition: all .15s; display: flex; justify-content: space-between;
}
.cat-item:hover { background: var(--bg4); color: var(--text1); }
.cat-count { color: var(--text3); }

/* ===== 메인 ===== */
main { flex: 1; min-width: 0; padding: 24px; }
.section.hidden { display: none; }

/* ===== 섹션 헤더 ===== */
.section-header {
  display: flex; justify-content: space-between; align-items: flex-start;
  margin-bottom: 20px; gap: 16px; flex-wrap: wrap;
}
.section-header h2 { font-size: 20px; font-weight: 700; }
.section-desc { font-size: 13px; color: var(--text2); margin-top: 3px; }
.section-tools { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }

.search-input {
  background: var(--bg2); border: 1px solid var(--border);
  border-radius: 20px; color: var(--text1);
  padding: 6px 14px; font-size: 13px; width: 200px; outline: none;
  transition: all .2s;
}
.search-input:focus { border-color: var(--accent); width: 240px; }

.filter-select {
  background: var(--bg2); border: 1px solid var(--border);
  color: var(--text1); padding: 6px 10px; border-radius: 6px;
  font-size: 13px; outline: none; cursor: pointer;
}

.icon-btn {
  background: var(--bg2); border: 1px solid var(--border);
  color: var(--text2); padding: 6px 12px; border-radius: 6px;
  font-size: 13px; cursor: pointer; transition: all .2s; white-space: nowrap;
}
.icon-btn:hover { border-color: var(--accent); color: var(--accent); }
.n8n-refresh.loading { opacity: .5; cursor: wait; }

/* ===== 카드 그리드 ===== */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 14px;
}
.card-grid-notes {
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
}

/* ===== 뉴스 카드 ===== */
.news-card {
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: var(--r); padding: 16px; cursor: pointer;
  transition: all .2s; display: flex; flex-direction: column; gap: 10px;
  position: relative; overflow: hidden;
}
.news-card::before {
  content: ''; position: absolute; top: 0; left: 0;
  width: 3px; height: 100%; background: var(--card-color, var(--accent));
}
.news-card:hover { border-color: var(--card-color, var(--accent)); transform: translateY(-2px); box-shadow: var(--shadow); }

.card-title { font-size: 14px; font-weight: 600; line-height: 1.4; }
.card-summary {
  font-size: 12px; color: var(--text2); line-height: 1.6;
  display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
}
.card-footer {
  display: flex; flex-wrap: wrap; gap: 6px; align-items: center;
  padding-top: 10px; border-top: 1px solid var(--border); margin-top: auto;
}
.card-date { font-size: 11px; color: var(--text3); margin-left: auto; }
.card-source { font-size: 11px; color: var(--text3); }
.has-note-dot {
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--accent); flex-shrink: 0; title: '메모 있음';
}

/* ===== 배지 ===== */
.badge {
  font-size: 10px; font-weight: 700; padding: 2px 7px;
  border-radius: 10px; text-transform: uppercase; letter-spacing: .4px; white-space: nowrap;
}
.b-cve     { background: rgba(248,81,73,.15);  color: var(--red);    border: 1px solid rgba(248,81,73,.3); }
.b-vuln    { background: rgba(210,153,34,.15); color: var(--orange); border: 1px solid rgba(210,153,34,.3); }
.b-breach  { background: rgba(188,140,255,.15);color: var(--purple); border: 1px solid rgba(188,140,255,.3); }
.b-tools   { background: rgba(88,166,255,.15); color: var(--blue);   border: 1px solid rgba(88,166,255,.3); }
.b-policy  { background: rgba(63,185,80,.15);  color: var(--green);  border: 1px solid rgba(63,185,80,.3); }
.b-other   { background: rgba(139,148,158,.15);color: var(--text2);  border: 1px solid rgba(139,148,158,.3); }
.b-attack  { background: rgba(248,81,73,.15);  color: var(--red);    border: 1px solid rgba(248,81,73,.3); }
.b-defense { background: rgba(63,185,80,.15);  color: var(--green);  border: 1px solid rgba(63,185,80,.3); }
.b-crypto  { background: rgba(88,166,255,.15); color: var(--blue);   border: 1px solid rgba(88,166,255,.3); }
.b-network { background: rgba(0,212,170,.15);  color: var(--accent); border: 1px solid rgba(0,212,170,.3); }
.b-tool    { background: rgba(227,179,65,.15); color: var(--yellow); border: 1px solid rgba(227,179,65,.3); }
.b-concept { background: rgba(139,148,158,.15);color: var(--text2);  border: 1px solid rgba(139,148,158,.3); }
.b-course  { background: rgba(188,140,255,.15);color: var(--purple); border: 1px solid rgba(188,140,255,.3); }
.b-docs    { background: rgba(88,166,255,.15); color: var(--blue);   border: 1px solid rgba(88,166,255,.3); }
.b-ctf     { background: rgba(248,81,73,.15);  color: var(--red);    border: 1px solid rgba(248,81,73,.3); }
.b-blog    { background: rgba(63,185,80,.15);  color: var(--green);  border: 1px solid rgba(63,185,80,.3); }
.b-video   { background: rgba(210,153,34,.15); color: var(--orange); border: 1px solid rgba(210,153,34,.3); }

.sev { font-size: 10px; font-weight: 700; padding: 2px 6px; border-radius: 4px; }
.sev-critical { background: var(--red);    color: #fff; }
.sev-high     { background: var(--orange); color: #000; }
.sev-medium   { background: var(--yellow); color: #000; }
.sev-low      { background: var(--green);  color: #000; }
.sev-info     { background: var(--blue);   color: #fff; }

.diff { font-size: 10px; font-weight: 700; padding: 2px 6px; border-radius: 4px; }
.diff-beginner { background: var(--green); color: #000; }
.diff-intermediate { background: var(--yellow); color: #000; }
.diff-advanced { background: var(--red); color: #fff; }

/* ===== 용어사전 ===== */
.alpha-filter {
  display: flex; flex-wrap: wrap; gap: 4px;
  margin-bottom: 16px; padding-bottom: 16px;
  border-bottom: 1px solid var(--border);
}
.alpha-btn {
  background: none; border: 1px solid var(--border);
  color: var(--text2); width: 30px; height: 30px;
  border-radius: 6px; font-size: 12px; font-weight: 600;
  cursor: pointer; transition: all .15s;
}
.alpha-btn:hover, .alpha-btn.active { border-color: var(--accent); color: var(--accent); background: var(--accent-dim); }

.glossary-list { display: flex; flex-direction: column; gap: 2px; }
.glossary-item {
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: var(--r); overflow: hidden; transition: border-color .2s;
}
.glossary-item:hover { border-color: var(--border2); }
.glossary-item.open { border-color: var(--accent); }

.glossary-header {
  display: flex; align-items: center; gap: 12px;
  padding: 14px 18px; cursor: pointer; user-select: none;
}
.g-term { font-size: 15px; font-weight: 700; flex: 1; }
.g-eng  { font-size: 12px; color: var(--text2); font-family: monospace; }
.g-arrow { color: var(--text3); font-size: 12px; transition: transform .2s; flex-shrink: 0; }
.glossary-item.open .g-arrow { transform: rotate(180deg); }

.glossary-body {
  display: none;
  padding: 0 18px 18px;
  border-top: 1px solid var(--border);
  padding-top: 14px;
}
.glossary-item.open .glossary-body { display: block; }

.g-definition { font-size: 14px; line-height: 1.7; color: var(--text1); margin-bottom: 12px; }
.g-example {
  background: var(--bg); border: 1px solid var(--border);
  border-left: 3px solid var(--accent); border-radius: 0 var(--r) var(--r) 0;
  padding: 10px 14px; font-size: 13px; color: var(--text2);
  line-height: 1.6; margin-bottom: 12px; font-family: monospace;
}
.g-related { display: flex; flex-wrap: wrap; gap: 6px; }
.g-rel-tag {
  font-size: 11px; padding: 2px 8px; border-radius: 10px;
  background: var(--bg4); border: 1px solid var(--border); color: var(--text2);
}
.g-actions { display: flex; gap: 8px; margin-top: 12px; justify-content: flex-end; }

/* ===== 노트 카드 ===== */
.note-card {
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: var(--r); padding: 16px;
  display: flex; flex-direction: column; gap: 10px;
  transition: all .2s; cursor: pointer;
}
.note-card:hover { border-color: var(--blue); transform: translateY(-2px); box-shadow: var(--shadow); }
.note-card::before {
  content: ''; display: block; width: 100%; height: 3px;
  background: var(--note-color, var(--blue)); border-radius: 3px 3px 0 0;
  margin: -16px -16px 0; width: calc(100% + 32px);
}
.note-title { font-size: 15px; font-weight: 600; }
.note-preview {
  font-size: 12px; color: var(--text2); line-height: 1.6;
  display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden;
}
.note-footer { display: flex; flex-wrap: wrap; gap: 6px; align-items: center; padding-top: 10px; border-top: 1px solid var(--border); }
.note-date { font-size: 11px; color: var(--text3); margin-left: auto; }

/* ===== 참고자료 ===== */
.resource-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 14px;
}
.resource-card {
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: var(--r); padding: 16px;
  display: flex; flex-direction: column; gap: 10px;
  transition: all .2s;
}
.resource-card:hover { border-color: var(--purple); transform: translateY(-2px); box-shadow: var(--shadow); }
.resource-card-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 8px; }
.resource-title { font-size: 14px; font-weight: 600; flex: 1; }
.resource-desc { font-size: 12px; color: var(--text2); line-height: 1.6; flex: 1; }
.resource-url {
  font-size: 11px; color: var(--blue); text-decoration: none;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
  display: block;
}
.resource-url:hover { text-decoration: underline; }
.resource-footer { display: flex; gap: 6px; align-items: center; margin-top: auto; }
.resource-actions { display: flex; gap: 4px; margin-left: auto; }

/* ===== 빈 상태 ===== */
.empty-state { text-align: center; padding: 60px 24px; color: var(--text2); }
.empty-icon { font-size: 48px; margin-bottom: 12px; }
.empty-state p { font-size: 14px; line-height: 1.7; }

/* ===== 모달 ===== */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.75);
  z-index: 200; display: flex; align-items: center;
  justify-content: center; padding: 20px;
}
.modal {
  background: var(--bg2); border: 1px solid var(--border);
  border-radius: 12px; width: 100%; max-width: 600px;
  max-height: 88vh; overflow-y: auto; box-shadow: var(--shadow);
  animation: fadeUp .2s ease;
}
.modal-lg { max-width: 740px; }
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(16px); }
  to   { opacity: 1; transform: translateY(0); }
}
.modal-header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 18px 22px; border-bottom: 1px solid var(--border);
  position: sticky; top: 0; background: var(--bg2); z-index: 1;
}
.modal-header h3 { font-size: 16px; }
.modal-close {
  background: none; border: none; color: var(--text2);
  font-size: 20px; cursor: pointer; padding: 4px; border-radius: 4px;
  transition: color .15s; line-height: 1;
}
.modal-close:hover { color: var(--text1); }
.modal-body { padding: 22px; display: flex; flex-direction: column; gap: 16px; }

/* 폼 요소 */
.form-group { display: flex; flex-direction: column; gap: 6px; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.form-label { font-size: 12px; font-weight: 600; color: var(--text2); text-transform: uppercase; letter-spacing: .5px; }
.form-input, .form-select, .form-textarea {
  background: var(--bg); border: 1px solid var(--border);
  border-radius: var(--r); color: var(--text1);
  padding: 9px 12px; font-size: 13px; outline: none;
  transition: border-color .2s; font-family: inherit; width: 100%;
}
.form-input:focus, .form-select:focus, .form-textarea:focus { border-color: var(--accent); }
.form-textarea { resize: vertical; min-height: 100px; line-height: 1.6; }
.form-textarea.large { min-height: 200px; }
.form-hint { font-size: 11px; color: var(--text3); }
.form-actions { display: flex; gap: 8px; justify-content: flex-end; padding-top: 4px; }

/* 버튼 */
.btn { padding: 8px 18px; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; border: none; transition: all .2s; }
.btn-primary { background: var(--accent); color: #000; }
.btn-primary:hover { opacity: .85; }
.btn-secondary { background: var(--bg4); color: var(--text1); border: 1px solid var(--border); }
.btn-secondary:hover { border-color: var(--border2); }
.btn-danger { background: rgba(248,81,73,.15); color: var(--red); border: 1px solid rgba(248,81,73,.3); }
.btn-danger:hover { background: rgba(248,81,73,.25); }
.btn-sm { padding: 4px 10px; font-size: 12px; }
.btn-icon { background: none; border: 1px solid var(--border); color: var(--text2); padding: 4px 8px; border-radius: 6px; font-size: 12px; cursor: pointer; transition: all .15s; }
.btn-icon:hover { border-color: var(--accent); color: var(--accent); }

/* 상세 보기 */
.detail-meta { display: flex; flex-wrap: wrap; gap: 8px; padding-bottom: 14px; border-bottom: 1px solid var(--border); }
.detail-body { font-size: 14px; line-height: 1.8; color: var(--text2); white-space: pre-wrap; }
.detail-link {
  display: inline-flex; align-items: center; gap: 6px;
  color: var(--blue); text-decoration: none; font-size: 13px;
  padding: 7px 14px; border: 1px solid var(--blue);
  border-radius: 6px; transition: background .15s; align-self: flex-start;
}
.detail-link:hover { background: rgba(88,166,255,.12); }
.note-editor {
  background: var(--bg); border: 1px solid var(--border);
  border-radius: var(--r); padding: 14px;
  display: flex; flex-direction: column; gap: 8px;
}
.note-editor-label { font-size: 12px; color: var(--text3); }
.note-editor textarea {
  background: transparent; border: none; color: var(--text1);
  font-family: inherit; font-size: 13px; resize: vertical;
  outline: none; line-height: 1.7; min-height: 90px; width: 100%;
}
.note-editor-actions { display: flex; justify-content: flex-end; }

/* n8n JSON 블록 */
.code-box {
  background: var(--bg); border: 1px solid var(--border);
  border-radius: var(--r); padding: 14px;
  font-family: monospace; font-size: 12px; color: var(--text2);
  overflow-x: auto; line-height: 1.6; white-space: pre;
}

/* ===== 토스트 ===== */
.toast {
  position: fixed; bottom: 20px; right: 20px;
  background: var(--bg3); border: 1px solid var(--border);
  border-radius: var(--r); padding: 11px 18px;
  font-size: 13px; color: var(--text1);
  box-shadow: var(--shadow); z-index: 999;
  display: flex; gap: 10px; align-items: center;
  animation: slideIn .25s ease; max-width: 300px;
}
.toast.success { border-left: 3px solid var(--green); }
.toast.error   { border-left: 3px solid var(--red); }
.toast.info    { border-left: 3px solid var(--accent); }
@keyframes slideIn {
  from { transform: translateX(110%); opacity: 0; }
  to   { transform: translateX(0);    opacity: 1; }
}

/* ===== 반응형 ===== */
@media (max-width: 900px) {
  .sidebar { display: none; }
  .form-row { grid-template-columns: 1fr; }
}
@media (max-width: 600px) {
  .header-inner { flex-wrap: wrap; height: auto; padding: 10px 14px; }
  .main-nav { order: 3; width: 100%; padding-bottom: 4px; }
  .logo-sub { display: none; }
  .card-grid { grid-template-columns: 1fr; }
  .resource-grid { grid-template-columns: 1fr; }
  .search-input { width: 120px; }
  .search-input:focus { width: 150px; }
}
